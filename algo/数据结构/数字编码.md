---
title: 数字编码
---

## 原码、反码和补码

- 原码：我们将数字的二进制表示的最高位视为符号位，其中 `0` 表示正数，`1` 表示负数，其余位表示数字的值.
- 反码：正数的反码与其原码相同，负数的反码是对其原码除符号位外的所有位取反.
- 补码：正数的补码与其原码相同，负数的补码是在其反码的基础上加 `1`.

![原码、反码与补码之间的相互转换](../assets/1s_2s_complement.png)


在计算机中，并不需要将数字转换成原码、反码、再转换成补码这样的操作过程，这种操作过程主要与二进制补码表示法在内部的表示和处理有关。在计算机中，数值通常以补码的形式进行存储和运算。

1. 原码、反码、补码：这些概念主要是为了理解二进制数在计算机中的表示方式而引入的。原码是最简单的表示方式，直接使用二进制位表示数字。反码是原码的一种变体，它的符号位取反。补码是反码的一种改进，它是在反码的基础上加1。
2. 二进制补码表示：在计算机中，数值通常以二进制补码形式表示。这种表示方式具有很多优势，包括对加法和减法的封闭性。大多数现代计算机体系结构和编程语言都使用补码来进行数值计算。
3. 转换过程：在计算机内部，数字表示为补码形式，因此不需要在不同的表示之间进行转换。当您执行算术操作时，计算机会直接操作补码，无需转换为其他形式。
4. 编译器和操作系统：编译器和操作系统不处理数字的原码、反码和补码表示方式。它们主要关注高级语言代码的编译、链接、加载和执行。底层的数值表示和处理由计算机硬件和底层系统库来处理，这些组件直接支持二进制补码表示。

总之，原码、反码和补码是用来理解计算机内部二进制数值表示的概念，但在实际计算机操作中，通常使用二进制补码表示，并且编译器和操作系统不需要在这些表示之间进行转换。计算机硬件和底层系统库会直接处理二进制补码，以执行各种算术和逻辑操作

## 浮点数编码

根据 `IEEE 754` 标准，`32-bit` 长度的 `float` 由以下三个部分构成。

- 符号位 `S`：占 `1` 位 ，对应 `b31`
- 指数位 `E`：占 8 位 ，对应 `b30...b23`
- 分数位 `N`：占 23 位 ，对应 `b22...b0`

![ IEEE 754 标准下的 float 的计算示例](../assets/ieee_754_float.png)

`float` 的表示方式包含指数位，导致其取值范围远大于 `int` `。根据以上计算，float` 可表示的最大正数为 `2^(254-127)*(2-2^-23)≈3.4*10^38`，切换符号位便可得到最小负数。 

> 尽管浮点数 `float` 扩展了取值范围，但其副作用是牺牲了精度。整数类型 `int` 将全部 `32` 位用于表示数字，数字是均匀分布的；而由于指数位的存在，浮点数 `float` 的数值越大，相邻两个数字之间的差值就会趋向越大
